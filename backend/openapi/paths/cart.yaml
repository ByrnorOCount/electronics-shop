"cart":
  get:
    summary: Get the user's shopping cart
    description: Retrieves all items currently in the logged-in user's shopping cart.
    operationId: getCart
    tags:
      - Cart
    security:
      - bearerAuth: []
    responses:
      "200":
        description: The user's cart items.
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../components/schemas.yaml#/CartItem"
      "401":
        description: Unauthorized.

  post:
    summary: Add an item to the cart
    description: Adds a product to the user's cart. If the item already exists, its quantity is updated.
    operationId: addItemToCart
    tags:
      - Cart
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            $ref: "../components/schemas.yaml#/AddToCartRequest"
    responses:
      "200":
        description: Item updated in cart.
        content:
          application/json:
            schema:
              $ref: "../components/schemas.yaml#/CartItem"
      "201":
        description: Item added to cart.
        content:
          application/json:
            schema:
              $ref: "../components/schemas.yaml#/CartItem"
      "401":
        description: Unauthorized.

"cart/sync":
  post:
    summary: Synchronize the user's cart
    description: Replaces the user's entire cart with the provided list of items. This is useful for syncing a local/guest cart with the server after login.
    operationId: syncCart
    tags:
      - Cart
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: array
            items:
              $ref: "../components/schemas.yaml#/AddToCartRequest"
    responses:
      "200":
        description: Cart synchronized successfully. Returns the full, updated cart.
        content:
          application/json:
            schema:
              type: array
              items:
                $ref: "../components/schemas.yaml#/CartItem"
"cart/items/{itemId}":
  put:
    summary: Update item quantity in cart
    description: Updates the quantity of a specific item in the cart.
    operationId: updateCartItemQuantity
    tags:
      - Cart
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: itemId
        required: true
        schema:
          type: integer
        description: The ID of the cart item to update.
    requestBody: { $ref: "../components/requestBodies.yaml#/UpdateCartItem" }
    responses:
      "200":
        description: Quantity updated successfully.
      "404":
        description: Cart item not found.

  delete:
    summary: Remove an item from the cart
    description: Deletes a specific item from the user's shopping cart.
    operationId: removeCartItem
    tags:
      - Cart
    security:
      - bearerAuth: []
    parameters:
      - in: path
        name: itemId
        required: true
        schema:
          type: integer
        description: The ID of the cart item to delete.
    responses:
      "204":
        description: Item successfully removed from cart. No content returned.
      "404":
        description: Cart item not found or does not belong to the user.
